<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farming Labor Job Application</title>
     <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Free HTML Templates" name="keywords">
    <meta content="Free HTML Templates" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@500;700&display=swap"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

</head>

<body>

    <header class="top-bar">
        <div class="top-left">
            <img src="img/logo.png"
                alt="Logo" class="logo">
            <span class="brand">Smart Farmers</span>
        </div>

        <div class="top-center">
            <a href="live weather.html"><button id="weather-btn">ðŸŒ¤ Live Weather</button></a>

        </div>

        <div class="top-right">
            <a href="ai chat.html"> <button id="voice-btn">ðŸŽ¤ AI Voice Assistant</button></a>
        </div>
    </header>

    <!-- Navigation Bar -->

    <nav class="navbar">
        <div class="nav-container">
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="about.html" class="nav-link">About</a></li>

                <li class="dropdown">
                    <a href="#" class="nav-link active">Farming</a>
                    <ul class="dropdown-menu">
                        <li><a href="fruitCrops.html">Fruit Crops</a></li>
                        <li><a href="fieldCrops.html">Field Crops</a></li>
                        <li><a href="vegetable.html">Vegetable Crops</a></li>
                        <li><a href="organic.html">Organic Culture</a></li>
                        <li><a href="water-management.html">Water Management</a></li>
                    </ul>
                </li>

                <li><a href="service.html" class="nav-link">Services</a></li>
                <li><a href="subsidy.html" class="nav-link">Subsidy</a></li>

                <!-- <li class="dropdown">
                    <a href="#" class="nav-link active">Market_place</a>
                    <ul class="dropdown-menu">
                        <li><a href="seller.html">Seller</a></li>
                        <li><a href="buyer.html">Buyer</a></li>
                    </ul>
                </li> -->

                <li><a href="market_place.html" class="nav-link">Market_Place</a></li>
                


                <li><a href="blog.html" class="nav-link">Blog</a></li>

                 <li class="dropdown">
                    <a href="#" class="nav-link active">Farmers</a>
                    <ul class="dropdown-menu">
                        <li><a href="Labor_log.html">Labor Job </a></li>
                        <li><a href="workers.html">Workers</a></li>
                        <li><a href="labor-profile.html">Labor_Profile</a></li>
                        <li><a href="payments.html">Payment History</a></li>
                    </ul>
                </li>


                <li><a href="#" class="nav-link">Elements</a></li>
                <li><a href="#" class="nav-link">Faq</a></li>
                <li><a href="#" class="nav-link">Login</a></li>
            </ul>
        </div>
    </nav>



    <h1 class="h12">ðŸŒ¾ Farming Labor Rent System</h1>
    <!-- <div class="nav-links">
        <a href="jobs.html">Available Labor For Works</a>
        <a href="payments.html">Payment History</a>
        <a href="labor-profile.html">My Profile</a>
    </div> -->
    <div class="container1">

        <!-- Register Labor Section -->
        <div class="form-section">
            <h2 class="section-title">Register as Labor</h2>
            <label for="type">Select Type:</label>
            <select id="type" onchange="toggleGroupFields()">
                <option value="single">Single</option>
                <option value="group">Group</option>
            </select>

            <!-- Single Fields -->
            <div id="singleFields">
                <label>Name:</label>
                <input type="text" id="singleName" placeholder="Enter name">

                <label>Age:</label>
                <input type="number" id="singleAge" placeholder="Enter age" onchange="toggleSingleID()">

                <div id="singleIDFields"></div>

                <label>Phone Number:</label>
                <input type="text" id="singlePhone" placeholder="Enter phone number">

                <label>Work Experience (years):</label>
                <input type="number" id="singleExp" placeholder="Enter work experience">

                <label>Price (per day):</label>
                <input type="number" id="priceSingle" placeholder="Enter price">
            </div>

            <!-- Group Fields -->
            <div id="groupFields" style="display:none;">
                <label for="groupCount">Number of Members:</label>
                <input type="number" id="groupCount" min="2" placeholder="Enter number of members">
                <div id="groupMembers"></div>

                <label for="priceGroup">Group Price (per day):</label>
                <input type="number" id="priceGroup" placeholder="Enter total group price">
            </div>

            <button class="button1" onclick="registerLabor()">Register Labor</button>
        </div>

        <!-- Labor Profile Section -->
        <div class="profile-section" id="profileSection" style="display: none;">
            <h2 class="section-title">Your Labor Profile</h2>
            <div id="profileInfo"></div>
            <button class="button1" onclick="location.href='labor-profile.html'">Go to My Profile</button>
        </div>
    </div>

    <script>
        let jobs = JSON.parse(localStorage.getItem('jobs')) || [];
        let laborProfiles = JSON.parse(localStorage.getItem('laborProfiles')) || [];
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;

        function toggleGroupFields() {
            const type = document.getElementById('type').value;
            document.getElementById('singleFields').style.display = (type === 'single') ? 'block' : 'none';
            document.getElementById('groupFields').style.display = (type === 'group') ? 'block' : 'none';
        }

        function toggleSingleID() {
            const age = document.getElementById('singleAge').value;
            const container1 = document.getElementById('singleIDFields');
            container1.innerHTML = '';
            if (age && age < 18) {
                container1.innerHTML = `
          <label>Birth Registration (Upload):</label>
          <input type="file" id="singleBirthPic" accept="image/*" onchange="previewImage(this, 'preview-single-birth')">
          <img id="preview-single-birth" class="preview" style="display:none;">
        `;
            } else if (age) {
                container1.innerHTML = `
          <label>NID Card (Upload):</label>
          <input type="file" id="singleNidPic" accept="image/*" onchange="previewImage(this, 'preview-single-nid')">
          <img id="preview-single-nid" class="preview" style="display:none;">
          <label>NID Number:</label>
          <input type="text" id="singleNidNum" placeholder="Enter NID number">
        `;
            }
        }

        document.getElementById('groupCount').addEventListener('input', function () {
            const count = parseInt(this.value) || 0;
            const container1 = document.getElementById('groupMembers');
            container1.innerHTML = '';
            for (let i = 1; i <= count; i++) {
                container1.innerHTML += `
          <h3 class="section-title">Member ${i}</h3>
          <label>Name:</label>
          <input type="text" id="member${i}Name" placeholder="Enter name">

          <label>Age:</label>
          <input type="number" id="member${i}Age" placeholder="Enter age" onchange="toggleGroupMemberID(${i})">

          <div id="member${i}ID"></div>

          <label>Phone:</label>
          <input type="text" id="member${i}Phone" placeholder="Enter phone number">

          <label>Experience (years):</label>
          <input type="number" id="member${i}Exp" placeholder="Enter work experience">
        `;
            }
        });

        function toggleGroupMemberID(memberIndex) {
            const age = parseInt(document.getElementById(`member${memberIndex}Age`).value);
            const container1 = document.getElementById(`member${memberIndex}ID`);
            container1.innerHTML = '';
            if (age && age < 18) {
                container1.innerHTML = `
          <label>Birth Registration (Upload):</label>
          <input type="file" id="member${memberIndex}Birth" accept="image/*" onchange="previewImage(this, 'preview-member${memberIndex}-birth')">
          <img id="preview-member${memberIndex}-birth" class="preview" style="display:none;">
        `;
            } else if (age) {
                container1.innerHTML = `
          <label>NID Card (Upload):</label>
          <input type="file" id="member${memberIndex}Nid" accept="image/*" onchange="previewImage(this, 'preview-member${memberIndex}-nid')">
          <img id="preview-member${memberIndex}-nid" class="preview" style="display:none;">
          <label>NID Number:</label>
          <input type="text" id="member${memberIndex}NidNum" placeholder="Enter NID number">
        `;
            }
        }

        function previewImage(input, previewId) {
            const img = document.getElementById(previewId);
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    img.src = e.target.result;
                    img.style.display = "block";
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        function registerLabor() {
            const type = document.getElementById('type').value;
            let job = {};

            if (type === 'single') {
                const name = document.getElementById('singleName').value;
                const age = document.getElementById('singleAge').value;
                const phone = document.getElementById('singlePhone').value;
                const exp = document.getElementById('singleExp').value;
                const price = document.getElementById('priceSingle').value;

                if (!name || !age || !phone || !exp || !price) {
                    alert('Please fill all fields for single labor');
                    return;
                }

                let idType, idNum = '';
                if (age < 18) {
                    idType = "Birth Certificate";
                } else {
                    idType = "NID";
                    idNum = document.getElementById('singleNidNum').value;
                }

                const regPrice = 4; // fixed for single

                job = {
                    type,
                    members: [{ name, age, phone, exp, idType, idNum }],
                    price,
                    regPrice,
                    status: 'available',
                    laborId: generateId()
                };

                // Create labor profile
                const laborProfile = {
                    id: job.laborId,
                    name: name,
                    type: type,
                    wallet: 0,
                    completedJobs: [],
                    paymentHistory: []
                };

                laborProfiles.push(laborProfile);
                localStorage.setItem('laborProfiles', JSON.stringify(laborProfiles));

                // Set as current user
                currentUser = laborProfile;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));

            } else {
                const count = document.getElementById('groupCount').value;
                const price = document.getElementById('priceGroup').value;
                if (!count || !price) {
                    alert('Please fill all fields for group labor');
                    return;
                }
                const members = [];
                for (let i = 1; i <= count; i++) {
                    const name = document.getElementById(`member${i}Name`).value;
                    const age = document.getElementById(`member${i}Age`).value;
                    const phone = document.getElementById(`member${i}Phone`).value;
                    const exp = document.getElementById(`member${i}Exp`).value;

                    let idType = age < 18 ? "Birth Certificate" : "NID";
                    let idNum = "";

                    if (idType === "NID") {
                        idNum = document.getElementById(`member${i}NidNum`).value;
                    }

                    members.push({ name, age, phone, exp, idType, idNum });
                }
                const regPrice = count * 4; // group * 4
                job = {
                    type,
                    members,
                    price,
                    regPrice,
                    status: 'available',
                    laborId: generateId()
                };

                // Create labor profile for group (group leader)
                const laborProfile = {
                    id: job.laborId,
                    name: members[0].name + " (Group Leader)",
                    type: type,
                    wallet: 0,
                    completedJobs: [],
                    paymentHistory: []
                };

                laborProfiles.push(laborProfile);
                localStorage.setItem('laborProfiles', JSON.stringify(laborProfiles));

                // Set as current user
                currentUser = laborProfile;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
            }

            jobs.push(job);
            localStorage.setItem('jobs', JSON.stringify(jobs));
            alert('Labor registered successfully!');

            // Show profile section
            document.getElementById('profileSection').style.display = 'block';
            document.getElementById('profileInfo').innerHTML = `
                <p><strong>Labor ID:</strong> ${job.laborId}</p>
                <p><strong>Name:</strong> ${job.members[0].name}</p>
                <p><strong>Type:</strong> ${job.type}</p>
                <p><strong>Status:</strong> Available for work</p>
            `;
        }

        function generateId() {
            return Math.floor(100000 + Math.random() * 900000).toString();
        }

        // Check if user already has a profile
        window.onload = function () {
            if (currentUser) {
                document.getElementById('profileSection').style.display = 'block';
                document.getElementById('profileInfo').innerHTML = `
                    <p><strong>Labor ID:</strong> ${currentUser.id}</p>
                    <p><strong>Name:</strong> ${currentUser.name}</p>
                    <p><strong>Type:</strong> ${currentUser.type}</p>
                    <p><strong>Wallet Balance:</strong> $${currentUser.wallet}</p>
                `;
            }
        };
    </script>
</body>

</html>