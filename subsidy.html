<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡¶ï‡ßÉ‡¶∑‡¶ø ‡¶≠‡¶∞‡ßç‡¶§‡ßÅ‡¶ï‡¶ø ‡¶ò‡ßã‡¶∑‡¶£‡¶æ ‡¶ì ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞</title>

  <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Free HTML Templates" name="keywords">
    <meta content="Free HTML Templates" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@500;700&display=swap"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Noto Sans Bengali', 'Inter', 'ui-sans-serif', 'system-ui']
          },
          boxShadow: {
            soft: '0 10px 30px rgba(0,0,0,0.08)',
            lift: '0 12px 40px rgba(16,185,129,0.25)'
          }
        }
      }
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />

  <style>
    /* ‡¶∏‡¶π‡¶ú CSS ‚Äì Tailwind ‡¶õ‡¶æ‡¶°‡¶º‡¶æ‡¶ì ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
:root{
  --ring: 0 0 0 3px rgba(16, 185, 129, 0.35);
}
.tab-btn{
  border-radius: 0.75rem;
  padding: 0.6rem 0.9rem;
  font-size: 0.95rem;
  background: #ecfdf5;
  color: #065f46;
  border: 1px solid #a7f3d0;
  transition: all .15s ease;
}
.tab-btn:hover{ filter: brightness(0.98); }
.tab-active{
  background: #065f46 !important;
  color: #fff !important;
  border-color: #065f46 !important;
}
.label{ display:block; font-size:0.9rem; color:#334155; margin-bottom:6px; }
.input{
  width:100%; border:1px solid #e2e8f0; border-radius:0.75rem; padding:0.7rem 1rem;
  outline:none; background:#fff;
}
.input:focus{ box-shadow: var(--ring); border-color:#10b981; }
.badge{
  display:inline-flex; align-items:center; gap:.4rem; border-radius:999px; padding:.25rem .6rem; font-size:.8rem; font-weight:600;
}
.badge-open{ background:#d1fae5; color:#065f46; border:1px solid #a7f3d0; }
.badge-closed{ background:#ffe4e6; color:#9f1239; border:1px solid #fecdd3; }
.badge-expired{ background:#fef3c7; color:#92400e; border:1px solid #fde68a; }
.card{ border-radius:1.1rem; background:#fff; box-shadow:0 10px 30px rgba(0,0,0,0.08); padding:1rem; display:flex; flex-direction:column; gap:.6rem; }
.card:hover{ transform: translateY(-2px); transition:transform .12s ease; }
.softlist li+li{ margin-top:.25rem; }

  </style>
</head>
<body>
     <header class="top-bar">
        <div class="top-left">
            <img src="img/logo.png"
                alt="Logo" class="logo">
            <span class="brand">Smart Farmers</span>
        </div>

        <div class="top-center">
            <a href="live weather.html"><button id="weather-btn">üå§ Live Weather</button></a>

        </div>

        <div class="top-right">
            <a href="ai chat.html"> <button id="voice-btn">üé§ AI Voice Assistant</button></a>
        </div>
    </header>

    <!-- Navigation Bar -->

    <nav class="navbar">
        <div class="nav-container">
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="about.html" class="nav-link">About</a></li>

                <li class="dropdown">
                    <a href="#" class="nav-link active">Farming</a>
                    <ul class="dropdown-menu">
                        <li><a href="fruitCrops.html">Fruit Crops</a></li>
                        <li><a href="fieldCrops.html">Field Crops</a></li>
                        <li><a href="vegetable.html">Vegetable Crops</a></li>
                        <li><a href="organic.html">Organic Culture</a></li>
                        <li><a href="water-management.html">Water Management</a></li>
                    </ul>
                </li>

                <li><a href="service.html" class="nav-link">Services</a></li>
                <li><a href="subsidy.html" class="nav-link">Subsidy</a></li>

                <!-- <li class="dropdown">
                    <a href="#" class="nav-link active">Market_place</a>
                    <ul class="dropdown-menu">
                        <li><a href="seller.html">Seller</a></li>
                        <li><a href="buyer.html">Buyer</a></li>
                    </ul>
                </li> -->

                <li><a href="market_place.html" class="nav-link">Market_Place</a></li>
                


                <li><a href="blog.html" class="nav-link">Blog</a></li>

                <li class="dropdown">
                    <a href="#" class="nav-link active">Farmers</a>
                    <ul class="dropdown-menu">
                        <li><a href="Labor_log.html">Labor Job </a></li>
                        <li><a href="jobs.html">Workers</a></li>
                    </ul>
                </li>


                <li><a href="#" class="nav-link">Elements</a></li>
                <li><a href="#" class="nav-link">Faq</a></li>
                <li><a href="#" class="nav-link">Login</a></li>
            </ul>
        </div>
    </nav>
<!-- <body class="bg-emerald-50/40 text-slate-900 font-sans text-[17px] selection:bg-emerald-200/60"> -->
  <!-- ‡¶ü‡¶™‡¶¨‡¶æ‡¶∞ -->

  <header class="relative overflow-hidden">
    <div class="absolute inset-0 -z-10 bg-gradient-to-br from-emerald-500 via-teal-500 to-green-500"></div>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-10">
      <div class="flex items-center justify-between gap-3">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 rounded-2xl bg-white/15 flex items-center justify-center shadow-soft">
            <svg class="w-7 h-7 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7S2 12 2 12Z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 5v14" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 12h14" />
            </svg>
          </div>
          <div>
            <h1 class="text-3xl sm:text-4xl font-extrabold text-white drop-shadow">‡¶ï‡ßÉ‡¶∑‡¶ø ‡¶≠‡¶∞‡ßç‡¶§‡ßÅ‡¶ï‡¶ø</h1>
            <p class="text-white/90">‡¶ò‡ßã‡¶∑‡¶£‡¶æ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‚Ä¢ ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® ‚Ä¢ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</p>
          </div>
        </div>
        <div class="flex items-center gap-2">
          <button id="helpBtn" class="px-3 py-2 rounded-xl bg-white/15 text-white hover:bg-white/25 text-sm">‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ</button>
          <button id="adminToggle" class="px-3 py-2 rounded-xl bg-white text-emerald-700 hover:bg-emerald-50 text-sm shadow-soft">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®</button>
        </div>
      </div>
      <!-- ‡¶ß‡¶æ‡¶™ -->
      <div class="mt-4 sm:mt-8 grid grid-cols-1 sm:grid-cols-3 gap-3">
        <div class="rounded-2xl bg-white/10 backdrop-blur p-4 text-white shadow-soft">
          <div class="text-lg font-semibold">‡ßß) ‡¶ò‡ßã‡¶∑‡¶£‡¶æ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</div>
          <div class="text-white/90 text-sm">‡¶ñ‡ßã‡¶≤‡¶æ ‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ ‡¶¨‡ßá‡¶õ‡ßá ‡¶®‡¶ø‡¶®</div>
        </div>
        <div class="rounded-2xl bg-white/10 backdrop-blur p-4 text-white shadow-soft">
          <div class="text-lg font-semibold">‡ß®) ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</div>
          <div class="text-white/90 text-sm">‡¶∏‡¶π‡¶ú ‡¶´‡¶∞‡¶Æ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®</div>
        </div>
        <div class="rounded-2xl bg-white/10 backdrop-blur p-4 text-white shadow-soft">
          <div class="text-lg font-semibold">‡ß©) ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</div>
          <div class="text-white/90 text-sm">‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶® ‡¶π‡¶≤‡ßá SMS/‡¶ï‡¶≤</div>
        </div>
      </div>
    </div>
  </header>

  <!-- ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶ì ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-6 pb-24">
    <div class="bg-white rounded-2xl shadow-soft p-3 sm:p-4">
      <div class="flex flex-wrap items-center gap-2">
        <button data-tab="announcements" class="tab-btn tab-active">üì¢ ‡¶ò‡ßã‡¶∑‡¶£‡¶æ</button>
        <button data-tab="apply" class="tab-btn">üìù ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶ì ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç</button>
        <button data-tab="help" class="tab-btn">‚ùì ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ</button>

        <div class="ml-auto flex flex-wrap items-center gap-2 w-full sm:w-auto">
          <div class="relative flex-1 sm:flex-none">
            <input id="searchInput" type="text" placeholder="‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®‚Ä¶"
              class="w-full sm:w-64 px-4 py-3 rounded-xl bg-emerald-50 border border-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-sm pr-9">
            <svg class="w-4 h-4 absolute right-3 top-1/2 -translate-y-1/2 text-emerald-600" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="11" cy="11" r="8" stroke-width="1.5"></circle>
              <path d="M21 21l-4.3-4.3" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
          </div>
          <select id="statusFilter" class="px-3 py-3 rounded-xl bg-emerald-50 border border-emerald-200 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500">
            <option value="all">‡¶∏‡¶¨ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</option>
            <option value="open">‡¶ñ‡ßã‡¶≤‡¶æ</option>
            <option value="closed">‡¶¨‡¶®‡ßç‡¶ß</option>
            <option value="expired">‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶‡ßã‡¶§‡ßç‡¶§‡ßÄ‡¶∞‡ßç‡¶£</option>
          </select>
          <button id="addSchemeBtn" class="hidden admin-only px-4 py-3 rounded-xl bg-emerald-600 text-white text-sm hover:bg-emerald-700 shadow-lift">+ ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ</button>
        </div>
      </div>
    </div>

    <!-- ‡¶ò‡ßã‡¶∑‡¶£‡¶æ -->
    <section id="announcements" class="tab-panel mt-5 grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
      <!-- JS ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶Ü‡¶∏‡¶¨‡ßá -->
    </section>

    <!-- ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶ì ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç -->
    <section id="apply" class="tab-panel mt-5 hidden">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- ‡¶´‡¶∞‡¶Æ -->
        <div class="bg-white rounded-2xl shadow-soft p-5">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-xl font-bold">üìù ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶´‡¶∞‡¶Æ</h3>
            <button id="clearFormBtn" class="text-sm text-slate-500 hover:underline">‡¶´‡¶∞‡¶Æ ‡¶™‡¶∞‡¶ø‡¶∑‡ßç‡¶ï‡¶æ‡¶∞</button>
          </div>
          <form id="applyForm" class="space-y-4">
            <div>
              <label class="label">‡¶®‡¶æ‡¶Æ</label>
              <input name="name" class="input" placeholder="‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£: ‡¶∞‡¶π‡¶ø‡¶Æ ‡¶â‡¶¶‡ßç‡¶¶‡¶ø‡¶®" required>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label class="label">‡¶è‡¶®‡¶Ü‡¶á‡¶°‡¶ø / ‡¶Ü‡¶á‡¶°‡¶ø</label>
                <input name="nid" class="input" placeholder="‡ßß‡ß¶-‡ßß‡ß≠ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü" required>
              </div>
              <div>
                <label class="label">‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤</label>
                <input name="phone" class="input" placeholder="01XXXXXXXXX" required>
              </div>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label class="label">‡¶ñ‡¶æ‡¶§</label>
                <select name="farmType" class="input">
                  <option value="‡¶´‡¶∏‡¶≤">‡¶´‡¶∏‡¶≤</option>
                  <option value="‡¶™‡¶∂‡ßÅ‡¶™‡¶æ‡¶≤‡¶®">‡¶™‡¶∂‡ßÅ‡¶™‡¶æ‡¶≤‡¶®</option>
                  <option value="‡¶Æ‡ßé‡¶∏‡ßç‡¶Ø">‡¶Æ‡ßé‡¶∏‡ßç‡¶Ø</option>
                  <option value="‡¶â‡¶¶‡ßç‡¶Ø‡¶æ‡¶®">‡¶â‡¶¶‡ßç‡¶Ø‡¶æ‡¶®</option>
                </select>
              </div>
              <div>
                <label class="label">‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ/‡¶á‡¶â‡¶®‡¶ø‡¶Ø‡¶º‡¶®</label>
                <input name="location" class="input" placeholder="‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£: ‡¶∏‡¶æ‡¶≠‡¶æ‡¶∞, ‡¶Ü‡¶∂‡ßÅ‡¶≤‡¶ø‡¶Ø‡¶º‡¶æ">
              </div>
            </div>
            <div>
              <label class="label">‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ ‡¶¨‡¶æ‡¶õ‡¶æ‡¶á</label>
              <select name="schemeId" id="schemeSelect" class="input"></select>
            </div>
            <div>
              <label class="label">‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</label>
              <textarea name="notes" class="input min-h-[100px]" placeholder="‡¶Ø‡¶¶‡¶ø ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶ú‡¶æ‡¶®‡¶æ‡¶§‡ßá ‡¶ö‡¶æ‡¶®‚Ä¶"></textarea>
            </div>
            <button class="w-full py-3 rounded-xl bg-emerald-600 text-white font-semibold hover:bg-emerald-700 shadow-lift">‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®</button>
          </form>
        </div>
        <!-- ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç -->
        <div class="bg-white rounded-2xl shadow-soft p-5">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-xl font-bold">üì¶ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶Ü‡¶¨‡ßá‡¶¶‡¶®‡¶∏‡¶Æ‡ßÇ‡¶π</h3>
            <div class="flex gap-2">
              <button id="exportBtn" class="text-sm px-3 py-2 rounded-xl border border-emerald-200 hover:bg-emerald-50">‡¶°‡ßá‡¶ü‡¶æ ‡¶è‡¶ï‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü</button>
              <label for="importFile" class="text-sm px-3 py-2 rounded-xl border border-emerald-200 hover:bg-emerald-50 cursor-pointer">‡¶á‡¶Æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</label>
              <input id="importFile" type="file" accept="application/json" class="hidden">
            </div>
          </div>
          <div class="text-sm text-slate-600 mb-3">‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶≤‡ßá ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá‡•§</div>
          <div id="applicationsList" class="space-y-4"></div>
        </div>
      </div>
    </section>

    <!-- ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ -->
    <section id="help" class="tab-panel mt-5 hidden">
      <div class="bg-white rounded-2xl shadow-soft p-5 space-y-4">
        <h3 class="text-xl font-bold">‚ùì ‡¶ï‡ßÄ‡¶≠‡¶æ‡¶¨‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®</h3>
        <ul class="list-disc pl-6 space-y-2 text-slate-700">
          <li>üì¢ <span class="font-medium">‡¶ò‡ßã‡¶∑‡¶£‡¶æ</span> ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡ßá ‡¶ó‡¶ø‡¶Ø‡¶º‡ßá ‡¶ñ‡ßã‡¶≤‡¶æ ‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‡•§</li>
          <li>üü¢ <span class="font-medium">‡¶ñ‡ßã‡¶≤‡¶æ</span> ‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ‡ßá <span class="font-medium">‡¶Ü‡¶¨‡ßá‡¶¶‡¶®</span> ‡¶ö‡¶æ‡¶™‡ßÅ‡¶®‡•§</li>
          <li>üìù ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶® ‡¶è‡¶¨‡¶Ç ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®‡•§</li>
          <li>üì¶ <span class="font-medium">‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶Ü‡¶¨‡ßá‡¶¶‡¶®‡¶∏‡¶Æ‡ßÇ‡¶π</span> ‡¶è ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®: ‡¶ú‡¶Æ‡¶æ ‚Üí ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶≤‡ßã‡¶ö‡¶®‡¶æ ‚Üí ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§ / ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</li>
          <li>üõ°Ô∏è ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶è‡¶á ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá‡¶á ‡¶∏‡ßá‡¶≠ ‡¶•‡¶æ‡¶ï‡ßá (localStorage)‡•§</li>
        </ul>
        <p class="text-sm text-slate-500">‡¶®‡ßã‡¶ü: ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶¨‡¶æ‡¶ü‡¶®‡ßá PIN <code class="px-1 rounded bg-slate-100">1234</code> ‡¶¶‡¶ø‡¶≤‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ ‡¶Ø‡ßã‡¶ó/‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§</p>
      </div>
    </section>
  </main>

  <!-- ‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ ‡¶Æ‡¶°‡¶æ‡¶≤ -->
  <div id="schemeModal" class="fixed inset-0 hidden items-end sm:items-center justify-center z-50">
    <div class="absolute inset-0 bg-black/40" data-close-modal></div>
    <div class="w-full sm:max-w-xl bg-white rounded-t-2xl sm:rounded-2xl shadow-soft p-6 sm:mx-4">
      <div class="flex items-center justify-between mb-4">
        <h3 id="modalTitle" class="text-xl font-bold">‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ</h3>
        <button data-close-modal class="p-2 rounded-lg hover:bg-slate-100">
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <form id="schemeForm" class="space-y-4">
        <input type="hidden" name="id">
        <div>
          <label class="label">‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ</label>
          <input name="title" class="input" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶∏‡¶æ‡¶∞ ‡¶≠‡¶∞‡ßç‡¶§‡ßÅ‡¶ï‡¶ø ‡ß®‡ß¶‡ß®‡ß´" required>
        </div>
        <div>
          <label class="label">‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∑‡ßç‡¶†‡¶æ‡¶®</label>
          <input name="org" class="input" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ï‡ßÉ‡¶∑‡¶ø ‡¶Æ‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£‡¶æ‡¶≤‡¶Ø‡¶º" required>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
          <div>
            <label class="label">‡¶∂‡ßÅ‡¶∞‡ßÅ</label>
            <input name="openDate" type="date" class="input" required>
          </div>
          <div>
            <label class="label">‡¶∂‡ßá‡¶∑</label>
            <input name="closeDate" type="date" class="input" required>
          </div>
          <div>
            <label class="label">‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</label>
            <select name="status" class="input">
              <option value="open">‡¶ñ‡ßã‡¶≤‡¶æ</option>
              <option value="closed">‡¶¨‡¶®‡ßç‡¶ß</option>
              <option value="expired">‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶‡ßã‡¶§‡ßç‡¶§‡ßÄ‡¶∞‡ßç‡¶£</option>
            </select>
          </div>
        </div>
        <div>
          <label class="label">‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶∞‡¶æ‡¶Ç‡¶∂</label>
          <input name="benefit" class="input" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡ß™‡ß¶% ‡¶ñ‡¶∞‡¶ö ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ">
        </div>
        <div>
          <label class="label">‡¶¨‡¶ø‡¶¨‡¶∞‡¶£</label>
          <textarea name="description" class="input min-h-[120px]" placeholder="‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡ßá‡¶™‡ßá ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§‚Ä¶"></textarea>
        </div>
        <div class="flex items-center justify-between gap-3">
          <button type="button" data-close-modal class="px-4 py-2 rounded-xl border border-slate-200 hover:bg-slate-50">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
          <button class="px-4 py-2 rounded-xl bg-emerald-600 text-white font-semibold hover:bg-emerald-700">‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£</button>
        </div>
      </form>
    </div>
  </div>
<section>
        <footer>
            <div class="footer-top">
                <div class="footer-column logo-desc">
                    <h2><span class="leaf">üåø</span> Smart Farming</h2>
                    <p>Organic farming is beneficial to a wide range of organisms. It restores the biodiversity of the
                        core
                        resources and habitat of the region. The symbiosis between flora and fauna, animals, and humans
                        with
                        a chemical-free environment is paradise on Earth.</p>
                </div>
                <div class="footer-column contact">
                    <h3>Contact</h3>
                    <p><i class="fas fa-map-marker-alt"></i> Anthony Benoit 490 E Main Street Norwich CT 06360</p>
                    <p><i class="fas fa-phone"></i> +1 (2) 345 6789</p>
                    <p><i class="fas fa-fax"></i> +1 (2) 345 6789</p>
                    <p><i class="fas fa-envelope"></i> contact@yourdomain.com</p>
                </div>
                <div class="footer-column social">
                    <h3>Follow Us</h3>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-google"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <div class="footer-column subscribe">
                    <h3>Subscribe</h3>
                    <p>Enter your email and we'll send you latest information and plans.</p>
                    <div class="subscribe-form">
                        <input type="email" placeholder="Your Email ID" id="subscribe-email">
                        <button id="subscribe-btn"><i class="fas fa-envelope"></i></button>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>Copyright ¬© 2018. All rights reserved by, DesignThemes</p>
                <nav>
                    <a href="index.html">Home</a>
                    <a href="#">Join Us</a>
                    <a href="service.html">Services</a>
                    <a href="about.html">About</a>
                    <a href="#">Contact</a>
                </nav>
            </div>
        </footer>
    </section>

  <script>

    /* ‡¶ï‡ßÉ‡¶∑‡¶ø ‡¶≠‡¶∞‡ßç‡¶§‡ßÅ‡¶ï‡¶ø ‚Äî Bangla Only (Frontend)
 * ‡¶ü‡ßá‡¶ï: HTML + Tailwind CDN + Plain CSS + Vanilla JS
 * ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú: localStorage
 */

const $ = (s, el=document)=>el.querySelector(s);
const $$ = (s, el=document)=>[...el.querySelectorAll(s)];

const store = {
  get schemes(){ return JSON.parse(localStorage.getItem('bn_schemes')||'[]'); },
  set schemes(v){ localStorage.setItem('bn_schemes', JSON.stringify(v)); },
  get apps(){ return JSON.parse(localStorage.getItem('bn_apps')||'[]'); },
  set apps(v){ localStorage.setItem('bn_apps', JSON.stringify(v)); },
};

// Seed
(function seed(){
  if (store.schemes.length===0){
    store.schemes = [
      { id: crypto.randomUUID(), title:"‡¶∏‡¶æ‡¶∞ ‡¶≠‡¶∞‡ßç‡¶§‡ßÅ‡¶ï‡¶ø ‡ß®‡ß¶‡ß®‡ß´", org:"‡¶ï‡ßÉ‡¶∑‡¶ø ‡¶Æ‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£‡¶æ‡¶≤‡¶Ø‡¶º", openDate:"2025-08-01", closeDate:"2025-09-30", status:"open", benefit:"‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡ß™‡ß¶% ‡¶ñ‡¶∞‡¶ö ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ", description:"‡¶õ‡ßã‡¶ü ‡¶ö‡¶æ‡¶∑‡¶ø‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶á‡¶â‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ, ‡¶ü‡¶ø‡¶è‡¶∏‡¶™‡¶ø, ‡¶°‡¶ø‡¶è‡¶™‡¶ø ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º‡ßá ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ‡•§", createdAt:Date.now() },
      { id: crypto.randomUUID(), title:"‡¶∏‡ßã‡¶≤‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ö ‡¶™‡¶æ‡¶Æ‡ßç‡¶™ ‡¶Ö‡¶®‡ßÅ‡¶¶‡¶æ‡¶®", org:"‡¶ú‡ßç‡¶¨‡¶æ‡¶≤‡¶æ‡¶®‡¶ø ‡¶ï‡¶∞‡ßç‡¶§‡ßÉ‡¶™‡¶ï‡ßç‡¶∑", openDate:"2025-06-15", closeDate:"2025-08-31", status:"open", benefit:"‡¶ï‡ßç‡¶∞‡¶Ø‡¶º ‡¶ì ‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡ßá ‡¶Ö‡¶®‡ßÅ‡¶¶‡¶æ‡¶®", description:"‡¶°‡¶ø‡¶ú‡ßá‡¶≤ ‡¶ñ‡¶∞‡¶ö ‡¶ï‡¶Æ‡¶æ‡¶§‡ßá ‡¶™‡¶∞‡¶ø‡¶ö‡ßç‡¶õ‡¶®‡ßç‡¶® ‡¶∏‡ßá‡¶ö ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡¶æ‡¶∞‡•§", createdAt:Date.now() },
      { id: crypto.randomUUID(), title:"‡¶ß‡¶æ‡¶®‡ßá‡¶∞ ‡¶ö‡¶æ‡¶∞‡¶æ ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ (‡¶Ü‡¶Æ‡¶®)", org:"‡¶ï‡ßÉ‡¶∑‡¶ø ‡¶∏‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶∏‡¶æ‡¶∞‡¶£ ‡¶Ö‡¶ß‡¶ø‡¶¶‡¶™‡ßç‡¶§‡¶∞", openDate:"2025-05-01", closeDate:"2025-06-15", status:"expired", benefit:"‡¶´‡ßç‡¶∞‡¶ø ‡¶∏‡¶æ‡¶∞‡ßç‡¶ü‡¶ø‡¶´‡¶æ‡¶á‡¶° ‡¶ö‡¶æ‡¶∞‡¶æ", description:"‡¶∏‡¶π‡¶®‡¶∂‡ßÄ‡¶≤ ‡¶â‡¶ö‡ßç‡¶ö‡¶´‡¶≤‡¶®‡¶∂‡ßÄ‡¶≤ ‡¶ú‡¶æ‡¶§‡ßá‡¶∞ ‡¶ö‡¶æ‡¶∞‡¶æ ‡¶¨‡¶ø‡¶§‡¶∞‡¶£‡•§", createdAt:Date.now() }
    ];
  }
})();

const el = {
  year: $("#year"),
  tabs: $$(".tab-btn"),
  panels: $$(".tab-panel"),
  announcements: $("#announcements"),
  schemeModal: $("#schemeModal"),
  schemeForm: $("#schemeForm"),
  modalTitle: $("#modalTitle"),
  addSchemeBtn: $("#addSchemeBtn"),
  adminToggle: $("#adminToggle"),
  searchInput: $("#searchInput"),
  statusFilter: $("#statusFilter"),
  schemeSelect: $("#schemeSelect"),
  applyForm: $("#applyForm"),
  clearFormBtn: $("#clearFormBtn"),
  applicationsList: $("#applicationsList"),
  exportBtn: $("#exportBtn"),
  importFile: $("#importFile"),
  helpBtn: $("#helpBtn"),
};

// Utils
function todayStr(){ return new Date().toISOString().slice(0,10); }
function fmtDate(s){ if(!s) return ""; const d=new Date(s+"T00:00:00"); return d.toLocaleDateString('bn-BD',{year:'numeric',month:'short',day:'numeric'}); }
function computedStatus(s){
  if (s.status==='expired') return 'expired';
  const t=todayStr();
  if (s.closeDate < t) return 'expired';
  if (s.status==='closed') return 'closed';
  return 'open';
}
function statusBadge(st){
  const cls = st==='open' ? 'badge-open' : st==='closed' ? 'badge-closed' : 'badge-expired';
  const label = st==='open' ? '‡¶ñ‡ßã‡¶≤‡¶æ' : st==='closed' ? '‡¶¨‡¶®‡ßç‡¶ß' : '‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶‡ßã‡¶§‡ßç‡¶§‡ßÄ‡¶∞‡ßç‡¶£';
  return `<span class="badge ${cls}">${label}</span>`;
}

// Tabs
el.tabs.forEach(btn=>btn.addEventListener('click',()=>{
  el.tabs.forEach(b=>b.classList.remove('tab-active'));
  btn.classList.add('tab-active');
  const name = btn.dataset.tab;
  el.panels.forEach(p=>p.classList.toggle('hidden', p.id!==name));
  window.scrollTo({top:0,behavior:'smooth'});
}));
el.helpBtn.addEventListener('click',()=>{
  document.querySelector('[data-tab="help"]').click();
});

// Admin mode
let admin = false;
function applyAdminUI(){
  $$(".admin-only").forEach(x=>x.classList.toggle('hidden', !admin));
  el.adminToggle.textContent = admin ? "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‚úì" : "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®";
}
el.adminToggle.addEventListener('click',()=>{
  if (!admin){
    const pin = prompt("‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® PIN ‡¶¶‡¶ø‡¶® (‡¶°‡ßá‡¶Æ‡ßã: 1234):");
    if (pin!=="1234"){ alert("‡¶≠‡ßÅ‡¶≤ PIN"); return; }
  }
  admin = !admin;
  applyAdminUI();
});
applyAdminUI();

// Modal controls
function openSchemeModal(s=null){
  el.schemeModal.classList.remove('hidden');
  el.schemeModal.classList.add('flex');
  el.schemeForm.reset();
  el.modalTitle.textContent = s ? "‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ ‡¶è‡¶°‡¶ø‡¶ü" : "‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ";
  if (s){
    el.schemeForm.id.value = s.id;
    el.schemeForm.title.value = s.title;
    el.schemeForm.org.value = s.org;
    el.schemeForm.openDate.value = s.openDate;
    el.schemeForm.closeDate.value = s.closeDate;
    el.schemeForm.status.value = s.status;
    el.schemeForm.benefit.value = s.benefit||"";
    el.schemeForm.description.value = s.description||"";
  }
}
function closeSchemeModal(){
  el.schemeModal.classList.add('hidden');
  el.schemeModal.classList.remove('flex');
}
$("[data-close-modal]").addEventListener('click', closeSchemeModal);
$$("[data-close-modal]", el.schemeModal).forEach(b=>b.addEventListener('click', closeSchemeModal));

el.addSchemeBtn.addEventListener('click',()=>openSchemeModal());

el.schemeForm.addEventListener('submit',(e)=>{
  e.preventDefault();
  const v = Object.fromEntries(new FormData(el.schemeForm).entries());
  const item = {
    id: v.id || crypto.randomUUID(),
    title: v.title.trim(),
    org: v.org.trim(),
    openDate: v.openDate,
    closeDate: v.closeDate,
    status: v.status,
    benefit: v.benefit.trim(),
    description: v.description.trim(),
    createdAt: Date.now()
  };
  const list = store.schemes;
  const i = list.findIndex(x=>x.id===item.id);
  if (i>=0) list[i]=item; else list.push(item);
  store.schemes = list;
  closeSchemeModal();
  refresh();
  alert("‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá");
});

// Render announcements
function renderSchemes(){
  const q = el.searchInput.value.toLowerCase();
  const f = el.statusFilter.value;
  const list = store.schemes
    .map(s=>({...s, statusComputed: computedStatus(s)}))
    .filter(s=> (f==='all' || s.statusComputed===f))
    .filter(s=> s.title.toLowerCase().includes(q) || (s.org||'').toLowerCase().includes(q))
    .sort((a,b)=> a.statusComputed==='open' ? -1 : 1);

  el.announcements.innerHTML = list.map(s=>{
    const desc = (s.description||"").slice(0,110) + ((s.description||"").length>110 ? "‚Ä¶" : "");
    const tone = s.statusComputed==='open' ? "from-emerald-50 to-emerald-100 border-emerald-200" :
                 s.statusComputed==='closed' ? "from-rose-50 to-rose-100 border-rose-200" :
                 "from-amber-50 to-amber-100 border-amber-200";
    return `<article class="card bg-gradient-to-b ${tone} border">
      <div class="flex items-start justify-between gap-2">
        <h3 class="text-lg font-bold leading-tight">${s.title}</h3>
        ${statusBadge(s.statusComputed)}
      </div>
      <p class="text-sm text-slate-700">${s.org}</p>
      ${s.benefit ? `<div class="text-sm rounded-xl px-3 py-1 bg-white border border-emerald-200 inline-block">${s.benefit}</div>` : ""}
      <p class="text-sm text-slate-700">${desc}</p>
      <div class="text-xs text-slate-600">‡¶Ü‡¶¨‡ßá‡¶¶‡¶®‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º: ${fmtDate(s.openDate)} ‚Äì ${fmtDate(s.closeDate)}</div>
      <div class="mt-2 flex items-center justify-between">
        <button class="px-3 py-2 text-sm rounded-xl bg-white border border-slate-200 hover:bg-slate-50" data-view="${s.id}">‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§</button>
        <div class="flex items-center gap-2">
          <button class="px-3 py-2 text-sm rounded-xl bg-emerald-600 text-white hover:bg-emerald-700" data-apply="${s.id}" ${s.statusComputed!=='open'?'disabled':''}>‡¶Ü‡¶¨‡ßá‡¶¶‡¶®</button>
          <button class="admin-only px-3 py-2 text-sm rounded-xl bg-slate-900 text-white hover:bg-slate-800" data-edit="${s.id}">‡¶è‡¶°‡¶ø‡¶ü</button>
          <button class="admin-only px-3 py-2 text-sm rounded-xl border border-rose-200 text-rose-600 hover:bg-rose-50" data-del="${s.id}">‡¶°‡¶ø‡¶≤‡¶ø‡¶ü</button>
        </div>
      </div>
    </article>`;
  }).join('');

  // actions
  $$("#announcements [data-view]").forEach(b=>b.addEventListener('click',()=>{
    const id = b.getAttribute('data-view');
    const s = store.schemes.find(x=>x.id===id);
    alert(`${s.title}\n\n‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∑‡ßç‡¶†‡¶æ‡¶®: ${s.org}\n‡¶∏‡¶Æ‡ßü: ${fmtDate(s.openDate)} ‚Äì ${fmtDate(s.closeDate)}\n‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: ${computedStatus(s)}\n\n${s.description||''}`);
  }));
  $$("#announcements [data-apply]").forEach(b=>b.addEventListener('click',()=>{
    const id = b.getAttribute('data-apply');
    el.schemeSelect.value = id;
    document.querySelector('[data-tab="apply"]').click();
    el.schemeSelect.scrollIntoView({behavior:'smooth', block:'center'});
  }));
  $$("#announcements [data-edit]").forEach(b=>b.addEventListener('click',()=>{
    const id = b.getAttribute('data-edit');
    const s = store.schemes.find(x=>x.id===id);
    openSchemeModal(s);
  }));
  $$("#announcements [data-del]").forEach(b=>b.addEventListener('click',()=>{
    const id = b.getAttribute('data-del');
    if (!confirm("‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá‡¶®?")) return;
    store.schemes = store.schemes.filter(x=>x.id!==id);
    refresh();
  }));
}

// Filters
el.searchInput.addEventListener('input', renderSchemes);
el.statusFilter.addEventListener('change', renderSchemes);

// Apply form
function refreshSchemeSelect(){
  const openList = store.schemes.map(s=>({...s, statusComputed:computedStatus(s)})).filter(s=>s.statusComputed==='open');
  el.schemeSelect.innerHTML = openList.map(s=>`<option value="${s.id}">${s.title}</option>`).join('') || '<option disabled>‡¶ï‡ßã‡¶®‡ßã ‡¶ñ‡ßã‡¶≤‡¶æ ‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ ‡¶®‡ßá‡¶á</option>';
}
el.clearFormBtn.addEventListener('click',()=>el.applyForm.reset());

el.applyForm.addEventListener('submit',(e)=>{
  e.preventDefault();
  const v = Object.fromEntries(new FormData(el.applyForm).entries());
  if (!v.schemeId){ alert("‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®"); return; }
  const app = {
    id: crypto.randomUUID(),
    name: v.name.trim(),
    nid: v.nid.trim(),
    phone: v.phone.trim(),
    location: (v.location||'').trim(),
    farmType: v.farmType,
    schemeId: v.schemeId,
    notes: (v.notes||'').trim(),
    status: "submitted",
    timeline: [{ key:"submitted", label:"‡¶ú‡¶Æ‡¶æ", at: Date.now() }],
    createdAt: Date.now(),
  };
  const arr = store.apps; arr.push(app); store.apps = arr;
  e.target.reset();
  refresh();
  alert("‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶ú‡¶Æ‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!");
});

function setAppStatus(id,next){
  const apps = store.apps;
  const a = apps.find(x=>x.id===id);
  if (!a) return;
  a.status = next;
  const labels={submitted:"‡¶ú‡¶Æ‡¶æ", review:"‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶≤‡ßã‡¶ö‡¶®‡¶æ", approved:"‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§", rejected:"‡¶¨‡¶æ‡¶§‡¶ø‡¶≤"};
  a.timeline.push({ key: next, label: labels[next]||next, at: Date.now() });
  store.apps = apps;
  refresh();
}

function renderApps(){
  const idx = Object.fromEntries(store.schemes.map(s=>[s.id,s]));
  const order = ["submitted","review","approved"];
  el.applicationsList.innerHTML = store.apps.slice().reverse().map(a=>{
    const s = idx[a.schemeId];
    const time = new Date(a.createdAt).toLocaleString('bn-BD');
    const rejected = a.status==='rejected';
    const stepsHtml = order.map(k=>{
      const active = a.timeline.some(t=>t.key===k);
      const label = ({submitted:"‡¶ú‡¶Æ‡¶æ", review:"‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶≤‡ßã‡¶ö‡¶®‡¶æ‡¶ß‡ßÄ‡¶®", approved:"‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§"})[k];
      return `<div class="flex items-center gap-2 text-xs ${active?'text-emerald-700':''}">
        <span class="w-2 h-2 rounded-full ${active?'bg-emerald-500':'bg-slate-300'}"></span>
        <span>${label}</span>
      </div>`;
    }).join('');
    return `<div class="rounded-2xl border border-emerald-200 bg-white p-4">
      <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2">
        <div>
          <div class="text-sm text-slate-500">${time}</div>
          <div class="font-semibold">${a.name} ‚Äî <span class="text-slate-600">${a.nid}</span></div>
          <div class="text-sm text-slate-600">‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ: <span class="font-medium">${s ? s.title : "‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ"}</span></div>
        </div>
        <div class="flex items-center gap-2">
          <span class="badge ${rejected?'badge-closed': a.status==='approved'?'badge-open':'badge-open'}">${rejected?'‡¶¨‡¶æ‡¶§‡¶ø‡¶≤':a.status}</span>
          <button class="admin-only px-3 py-1.5 text-sm rounded-xl bg-slate-900 text-white hover:bg-slate-800" data-advance="${a.id}">‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶¨‡¶æ‡¶°‡¶º‡¶æ‡¶®</button>
          <button class="admin-only px-3 py-1.5 text-sm rounded-xl border border-rose-200 text-rose-600 hover:bg-rose-50" data-reject="${a.id}">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
          <button class="admin-only px-3 py-1.5 text-sm rounded-xl border border-slate-200 hover:bg-slate-50" data-delete-app="${a.id}">‡¶°‡¶ø‡¶≤‡¶ø‡¶ü</button>
        </div>
      </div>
      <div class="mt-3 flex items-center gap-4 flex-wrap">${stepsHtml} ${rejected?'<div class="flex items-center gap-2 text-xs text-rose-700"><span class="w-2 h-2 rounded-full bg-rose-500"></span><span>‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</span></div>':''}</div>
      ${a.notes ? `<p class="mt-2 text-sm text-slate-700"><span class="font-medium">‡¶®‡ßã‡¶ü:</span> ${a.notes}</p>` : ""}
    </div>`;
  }).join('');

  // admin actions
  $$("#applicationsList [data-advance]").forEach(b=>b.addEventListener('click',()=>{
    const id=b.getAttribute('data-advance');
    const app = store.apps.find(x=>x.id===id);
    const seq=["submitted","review","approved"];
    const i=seq.indexOf(app.status);
    if (i<seq.length-1) setAppStatus(id, seq[i+1]); else alert("‡¶á‡¶§‡ßã‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá‡¶á ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§‡•§");
  }));
  $$("#applicationsList [data-reject]").forEach(b=>b.addEventListener('click',()=>{
    const id=b.getAttribute('data-reject');
    if (!confirm("‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®?")) return;
    setAppStatus(id, "rejected");
  }));
  $$("#applicationsList [data-delete-app]").forEach(b=>b.addEventListener('click',()=>{
    const id=b.getAttribute('data-delete-app');
    if (!confirm("‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá‡¶®?")) return;
    store.apps = store.apps.filter(x=>x.id!==id);
    refresh();
  }));
}

// Export/Import
el.exportBtn.addEventListener('click',()=>{
  const data={ schemes:store.schemes, applications:store.apps, exportedAt:new Date().toISOString() };
  const blob = new Blob([JSON.stringify(data,null,2)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a=document.createElement('a'); a.href=url; a.download='subsidy-backup.json'; a.click();
  URL.revokeObjectURL(url);
});
el.importFile.addEventListener('change',(e)=>{
  const file=e.target.files[0]; if(!file) return;
  const reader=new FileReader();
  reader.onload=()=>{
    try{
      const data=JSON.parse(reader.result);
      if (Array.isArray(data.schemes)) store.schemes=data.schemes;
      if (Array.isArray(data.applications)) store.apps=data.applications;
      refresh();
      alert("‡¶á‡¶Æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®");
    }catch(err){ alert("‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶®‡¶Ø‡¶º"); }
  };
  reader.readAsText(file);
});

function refresh(){
  renderSchemes();
  refreshSchemeSelect();
  renderApps();
}
document.addEventListener('DOMContentLoaded',()=>{
  const y = document.getElementById("year"); if (y) y.textContent = new Date().getFullYear();
  refresh();
});


  </script>
</body>
</html>
